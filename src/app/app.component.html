<div class="scanner-app">
  <h2>{{ title }}</h2>

  <div class="scanner-controls">
    <button 
      (click)="startScan()" 
      [disabled]="!hasPermission || isScanning"
      class="scan-button">
      Start Scanning
    </button>
    <button 
      (click)="stopScan()" 
      [disabled]="!isScanning"
      class="stop-button">
      Stop Scanning
    </button>
  </div>

  <div class="scanner-container" *ngIf="isScanning">
    <zxing-scanner
      #scanner
      [formats]="allowedFormats"
      [device]="selectedDevice"
      [enable]="isScanning"
      (scanSuccess)="onCodeResult($event)"
      (scanError)="handleError($event)"
      [tryHarder]="true"
    ></zxing-scanner>
  </div>

  <div class="result-container">
    <label for="barcode-result">Scanned Barcode:</label>
    <input 
      id="barcode-result" 
      type="text" 
      [value]="scannedResult" 
      readonly 
      class="result-input"
    />
  </div>

  <div class="error-container" *ngIf="errorMessage">
    <p class="error-message">{{ errorMessage }}</p>
  </div>

  <div class="status-container">
    <p *ngIf="!hasDevices" class="status-message">
      No cameras found on this device.
    </p>
    <p *ngIf="!hasPermission" class="status-message">
      Camera permission is required. Please grant access when prompted.
    </p>
  </div>
</div>